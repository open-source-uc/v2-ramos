---
import { getCollection, render } from "astro:content";
import Layout from "@/layouts/Layout.astro";
import RecommendationDetail from "@/components/RecommendationDetail.astro";

export const prerender = true;

export async function getStaticPaths() {
  const recommendations = await getCollection("recommendations");

  return recommendations.map((rec) => ({
    params: {
      id: `${rec.data.code}-${rec.data.initiative.replace(/\s/g, "")}`,
    },
    props: { rec },
  }));
}

const { rec } = Astro.props;
const { data } = rec;
const {
  title,
  code,
  initiative,
  period,
  faculty,
  qualification,
  tags,
  resume,
} = data;

const { Content } = await render(rec);
---

<Layout>
  <main
    class="flex flex-col gap-4 min-h-screen w-full max-w-full overflow-hidden"
  >
    <a
      class="text-blue-600 hover:text-blue-800 hover:underline"
      href="/recommendations">â¬… Go back</a
    >
    <RecommendationDetail
      title={title}
      code={code}
      initiative={initiative}
      period={period}
      faculty={faculty}
      qualification={qualification}
      tags={tags}
    >
      <Content />
    </RecommendationDetail>
  </main>
</Layout>
