---
import { getCollection, render } from 'astro:content'
import Layout from '@/layouts/Layout.astro'
import RecommendationDetail from '@/components/common/RecommendationDetail.astro'

export const prerender = true

export async function getStaticPaths() {
	const recommendations = await getCollection('recommendations')

	return recommendations.map((rec) => ({
		params: {
			id: `${rec.data.code}-${rec.data.initiative.replace(/\s/g, '')}`,
		},
		props: { rec },
	}))
}

const { rec } = Astro.props
const { data } = rec
const { title, code, initiative, period, faculty, qualification, tags, resume } = data

const { Content } = await render(rec)
---

<Layout>
	<main class="container mx-auto px-4 py-8">
		<a
			class="inline-flex items-center gap-2 text-blue-600 transition-colors hover:text-blue-800 hover:underline"
			href="/recommendations"
		>
			‚Üê Volver a recomendaciones
		</a>

		<RecommendationDetail
			title={title}
			code={code}
			initiative={initiative}
			period={period}
			faculty={faculty}
			qualification={qualification}
			tags={tags}
		>
			<Content />
		</RecommendationDetail>
	</main>
</Layout>
