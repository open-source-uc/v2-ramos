---
import BlogCard from "@/components/features/blog/BlogCard.tsx";
import Layout from "@/layouts/Layout.astro";
import type { Blogs } from "@/types";

const blogsResponse = await fetch(new URL("/api/blogs", Astro.url.origin));
const blogsData = (await blogsResponse.json()) as Blogs[];
console.log(blogsData);
---

<Layout>
  <main class="grid md:grid-cols-2 lg:grid-cols-3">
    <div
      class="w-full h-[60vh] lg:h-[70vh] flex flex-col justify-center lg:col-start-1 lg:col-end-4 md:col-start-1 md:col-end-3"
    >
      <h1 class="text-3xl md:text-5xl text-center font-bold">
        Descubre blogs creados por la comunidad
      </h1>
    </div>
    {
      blogsData.map((blog) => {
        const { title, user_id, organization_name, period_time, readtime, tags } = blog;
        
        return (
          <div class="p-2 flex justify-center">
            <BlogCard
              title={title}
              authorName={}
              description={description}
              readtime={readtime}
              tags={tags || []}
            />
          </div>
        );
      })
    }
  </main>
</Layout>
