---
import Layout from '@/layouts/Layout.astro'
import ResourceCard from '@/components/common/ResourceCard.tsx'
import { getCollection } from 'astro:content'
import { ClockIcon, CalendarIcon } from '@/components/icons/icons'
import { Pill } from '@/components/ui/pill'
import { Button } from '@/components/ui/button'

const resources = await getCollection('resources')
const totalResources = resources.length + 1 // +1 por docs

// Mock categories for newspaper layout
const categories = [
	{ name: 'Documentaci√≥n', count: 1 },
	{ name: 'Tutoriales', count: resources.length },
	{ name: 'Gu√≠as', count: Math.floor(resources.length / 2) },
	{ name: 'Ayuda', count: 2 },
]
---

<Layout>
	<div class="mx-auto max-w-7xl px-4 py-6">
		<!-- Newspaper Header -->
		<header class="border-border mb-8 border-b pb-6">
			<div class="mb-4 flex items-center justify-between">
				<div>
					<h1 class="text-foreground mb-2 text-4xl font-bold">Centro de Recursos</h1>
					<p class="text-muted-foreground">Tu gu√≠a completa para dominar BuscaRamos</p>
				</div>
				<div class="tablet:flex text-muted-foreground hidden items-center gap-2 text-sm">
					<CalendarIcon className="h-4 w-4" />
					<span>Actualizado diariamente</span>
				</div>
			</div>

			<!-- Category Navigation -->
			<nav class="flex flex-wrap gap-2">
				{
					categories.map((category) => (
						<Button variant="ghost" size="sm" className="text-sm hover:bg-accent">
							{category.name}
							<span class="bg-muted text-muted-foreground ml-2 rounded-full px-2 py-1 text-xs">
								{category.count}
							</span>
						</Button>
					))
				}
			</nav>
		</header>

		<!-- Main Content Area -->
		<div class="grid grid-cols-1 gap-8 lg:grid-cols-4">
			<!-- Main Content -->
			<main class="lg:col-span-3">
				<!-- Featured Article -->
				<section class="mb-8">
					<div
						class="border-border overflow-hidden rounded-lg border bg-gradient-to-r from-blue-50 to-purple-50 dark:from-blue-950/20 dark:to-purple-950/20"
					>
						<div class="p-8">
							<div class="mb-4 flex items-center gap-2">
								<Pill variant="blue" size="sm">Destacado</Pill>
								<span class="text-muted-foreground text-sm">¬∑</span>
								<span class="text-muted-foreground text-sm">Actualizado recientemente</span>
							</div>
							<h2 class="mb-4 text-2xl font-bold">Documentaci√≥n Oficial de BuscaRamos</h2>
							<p class="text-muted-foreground mb-6 max-w-2xl text-lg">
								La gu√≠a completa para aprovechar al m√°ximo BuscaRamos. Incluye tutoriales paso a
								paso, mejores pr√°cticas y consejos de estudiantes experimentados.
							</p>
							<div class="flex items-center gap-4">
								<Button variant="default" href="/resources/documentation"> Leer ahora </Button>
								<div class="text-muted-foreground flex items-center gap-2 text-sm">
									<ClockIcon className="h-4 w-4" />
									<span>20 min de lectura</span>
								</div>
							</div>
						</div>
					</div>
				</section>

				<!-- Latest Articles Grid -->
				<section>
					<div class="mb-6 flex items-center justify-between">
						<h3 class="text-xl font-semibold">√öltimos Recursos</h3>
						<span class="text-muted-foreground text-sm">{totalResources} art√≠culos disponibles</span
						>
					</div>

					<div class="grid grid-cols-1 gap-6 md:grid-cols-2">
						{
							resources?.map((resource) => {
								const { title, description, readtime, author } = resource.data
								return (
									<ResourceCard
										title={title}
										description={description}
										readtime={readtime}
										authorTitle={author?.title}
										authorName={author?.name}
										authorPicture={author?.picture}
										resourceURL={`/resources/${resource.slug}`}
									/>
								)
							})
						}
					</div>
				</section>
			</main>

			<!-- Sidebar -->
			<aside class="lg:col-span-1">
				<div class="sticky top-8 space-y-6">
					<!-- Quick Stats -->
					<div class="bg-accent border-border rounded-lg border p-6">
						<h4 class="mb-4 font-semibold">Estad√≠sticas</h4>
						<div class="space-y-4">
							<div class="flex justify-between">
								<span class="text-muted-foreground text-sm">Total recursos:</span>
								<span class="font-medium">{totalResources}</span>
							</div>
							<div class="flex justify-between">
								<span class="text-muted-foreground text-sm">Documentaci√≥n:</span>
								<span class="font-medium">1</span>
							</div>
							<div class="flex justify-between">
								<span class="text-muted-foreground text-sm">Tutoriales:</span>
								<span class="font-medium">{resources.length}</span>
							</div>
						</div>
					</div>

					<!-- Quick Links -->
					<div class="bg-accent border-border rounded-lg border p-6">
						<h4 class="mb-4 font-semibold">Enlaces R√°pidos</h4>
						<div class="space-y-3">
							<a
								href="/resources/documentation"
								class="hover:text-foreground block text-sm transition-colors"
							>
								üìö Documentaci√≥n Oficial
							</a>
							<a
								href="#"
								class="text-muted-foreground hover:text-foreground block text-sm transition-colors"
							>
								üéØ Gu√≠a de Inicio R√°pido
							</a>
							<a
								href="#"
								class="text-muted-foreground hover:text-foreground block text-sm transition-colors"
							>
								‚ùì Preguntas Frecuentes
							</a>
							<a
								href="#"
								class="text-muted-foreground hover:text-foreground block text-sm transition-colors"
							>
								üí¨ Comunidad
							</a>
						</div>
					</div>

					<!-- Newsletter -->
					<div
						class="border-border rounded-lg border bg-gradient-to-br from-blue-50 to-indigo-50 p-6 dark:from-blue-950/20 dark:to-indigo-950/20"
					>
						<h4 class="mb-2 font-semibold">¬øTienes preguntas o sugerencias?</h4>
						<p class="text-muted-foreground mb-4 text-sm">
							Cont√°ctanos a buscaramos[at]osuc.dev para recibir ayuda personalizada.
						</p>
					</div>
				</div>
			</aside>
		</div>
	</div>
</Layout>
